<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8">
</head>

<body>
    <canvas id="myChart"></canvas>
    <script src="../lib/moment-with-locales.min.js"></script>
    <script src="chart.min.js"></script>
    <script>
        var xdata = [];
        var ydata = [];
        var xdata0 = [];
        var ydata0 = [];

        for (var i = 6; i >= 0; i--) {
            var d = new Date();
            d.setDate(d.getDate()-i);
            xdata.push(moment(d).format("ddd"));
            ydata.push(Math.random() * 10);
            xdata0.push(d);
            ydata0.push(Math.random() * 10);
        }

        var mychart = {
            type: "bar",
            data: {
                labels: xdata,
                datasets: [
                    {
                        label: "My First Dataset",
                        data: ydata0,
                        type: 'line',
                        backgroundColor: 'rgba(0, 0, 0, 0.3)',
                        order: 1,
                        borderColor: 'rgba(0, 0, 0, 0.3)',
                        borderDash: [6],
                        label: "previous week",
                        borderWidth: 1,
                        fill: false,
                        radius: 0,
                    },
                    {
                        label: "My First Dataset",
                        data: ydata,
                        order: 2,
                        borderWidth: 0,
                        backgroundColor: function (context) {
                            var index = context.dataIndex;
                            var value = context.dataset.data[index];
                            var min = Math.min(...context.dataset.data);
                            var max = Math.max(...context.dataset.data);
                            var opacity = value / max + 0.1;
                            var color = "rgba(65, 131, 196, " + opacity.toString() + ")";
                            return color;
                        },
                    }
                ]
            },
            options: {
                tooltips: {
                    mode: 'index',
                    intersect: false,
                },
                hover: {
                    mode: 'nearest',
                    intersect: true
                },
                legend: {
                    display: false
                },
                scales: {
                    x: {
                        distribution: 'series',
                        offset: true,
                        gridLines: {
                            display: false,
                            drawBorder: false
                        }
                    },
                    y: {
                        display: true,
                        ticks: {
                            beginAtZero: true
                        },
                        gridLines: {
                            display: false,
                            drawBorder: true
                        }
                    }
                }
            }
        };

        var ctx = document.getElementById('myChart').getContext('2d');
        var chart = new Chart(ctx, mychart);
    </script>

</body>

</html>